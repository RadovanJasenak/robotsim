<?xml version="1.0"?>
<robot name="nas_robot" xmlns:xacro="http://www.ros.org/wiki/xacro">

<!-- ma len 1 link => jednu cast - valec-->
<link name="telo">
<visual name='telo_visual'>
<origin xyz="0 0 0" rpy="0 0 0"/>
<geometry>
<box size="0.4 0.2 0.1"/>
</geometry>
</visual>
<collision name='telo_collision'>
<geometry>
<box size="0.4 0.2 0.1"/>
</geometry>
</collision>
<inertial>
<mass value="10.0"/>
<origin xyz="0.0 0 0.1" rpy="0 0 0"/>
<inertia ixx="0.5" ixy="0" ixz="0" iyy="1.0" iyz="0" izz="0.1"/>
</inertial>
</link>

<xacro:macro name="koleso" params="prefix reflect">
<link name="${prefix}_koleso">
<visual name="${prefix}_koleso_visual">
<origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
<geometry>
<cylinder radius="0.1" length="0.05"/>
</geometry>
</visual>
<collision name="${prefix}_koleso_collision">
<origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
<geometry>
<cylinder radius="0.1" length="0.05"/>
</geometry>
</collision>
<inertial>
<origin xyz="0 0 0" rpy="0 1.5707 1.5707"/>
<mass value="5"/>
<cylinder_inertia m="5" r="0.1" h="0.05"/>
<inertia ixx="1.0" ixy="0.0" ixz="0.0" iyy="1.0" iyz="0.0" izz="1.0"/>
</inertial>
</link>

<joint type="continuous" name="${prefix}_koleso_zaves">
<origin xyz="0.1 ${reflect*0.15} 0" rpy="0 0 0"/>
<child link="${prefix}_koleso" />
<parent link="telo"/>
<axis xyz="0 1 0" rpy="0 0 0"/>
<limit effort="100" velocity="100"/>
<joint_properties damping="0.0" friction="0.0"/>
</joint>

<transmission name="${prefix}_koleso_trans">
<type>transmission_interface/SimpleTransmission</type>
<actuator name="${prefix}_koleso_motor">
<mechanicalReduction>1</mechanicalReduction>
</actuator>
<joint name="${prefix}_koleso_zaves">
<hardwareInterface>hardware_interface/VelocityJointInterface</hardwareInterface>
</joint>
</transmission>

</xacro:macro>

<xacro:koleso prefix="lave" reflect="1"/>
<xacro:koleso prefix="prave" reflect="-1"/>

<gazebo>
<plugin name="gazebo_ros_control" filename="libgazebo_ros_control.so">
<robotNamespace>/</robotNamespace>
</plugin>
</gazebo>

</robot>
